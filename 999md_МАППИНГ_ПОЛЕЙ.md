# Маппинг: наши поля (БД) → 999.md (получено по API)

**999.md:** категория 658, подкатегория 659, тип 776 (Транспорт / Легковые автомобили / Продам).

---

## Наши поля из БД (b24_sp_f_1114.raw) → 999.md (feature id, название по API)

| Наше поле в raw (БД) | Название у нас | 999.md feature id | Название на 999 (по API) | Тип на 999 | Как подставляем |
|----------------------|----------------|-------------------|--------------------------|------------|-----------------|
| **ufCrm34_1748347910** | Marca auto | **20** | Марка | drop_down_options | По названию ищем option id в `999md_features_cars_sell.json` (142 марки) |
| **ufCrm34_1748431620** | Model auto | **21** | Модель | drop_down_options (depends_on: 20) | API `GET /dependent_options` по id марки → по названию модели option id |
| **ufCrm34_1748347979** | Anul producerii | **19** | Год выпуска | textbox_numeric | Число года |
| **ufCrm34_1756980662** | Preț de anunț (EUR) | **2** | Цена | textbox_numeric_measurement (eur/usd/mdl) | Число + unit `eur` |
| **ufCrm34_1748431531** | Parcurs, km | **104** | Пробег | textbox_numeric_measurement (km/mi) | Число + unit `km` |
| **ufCrm34_1756897294** | Фото | **14** | Фото | upload_images | Массив {url, urlMachine} → скачать → POST /images → массив image_id |
| **ufCrm34_1756926228375** | Link nobilauto.md | **13** | body (описание) | textarea_text | Добавляем в текст описания (плюс raw.title) |
| raw.title | Заголовок | **13** | body | textarea_text | Часть описания |
| — | Телефон | **16** | Контакты | contacts | env PUBLISH_999MD_PHONE или из запроса; формат 373... |

---

## Поля 999.md без маппинга из нашей БД (подставляем дефолты)

| 999.md feature id | Название на 999 (по API) | Дефолт в коде (option id) |
|-------------------|--------------------------|----------------------------|
| **2095** | Поколение | Берётся по API dependent_options от модели (первое доступное) |
| **775** | Регистрация | 18592 — Республика Молдова |
| **593** | Состояние | 18668 — С пробегом |
| **1761** | Наличие | 29670 — На месте |
| **1763** | Происхождение автомобиля | 29677 — Еврозона |
| **795** | Автор объявления | 23241 — Автодилер |
| **1196** | Руль | 21979 — Левый |
| **846** | Количество мест | 19119 — 5 |
| **102** | Тип кузова | 6 — Седан |
| **2553** | Двигатель | 43680 — 1.6 л |
| **151** | Тип топлива | 10 — Бензин |
| **108** | Привод | 5 — Передний |
| **7** | Регион | 12900 — Кишинёв мун. |

---

## Итог

- **Из БД берём:** марка, модель, год, цена, пробег, фото, ссылка на сайт, title → маппим в фичи 20, 21, 19, 2, 104, 14, 13, 16.
- **Марка/модель:** текст из БД → поиск option id по названию (марки из JSON, модели через API dependent_options).
- **Поколение:** по API от выбранной модели (первое значение).
- **Остальные обязательные поля 999:** из константы `DEFAULTS` в `publish_999md.py`.
